<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BINTANG MOTOR SUBANG (RIZKI) - Detail Mobil</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="style.css" />
  <style>
    .thumb-list img.active {
      border: 2px solid #0d6efd;
    }

    /* Scrollable thumbnail container */
    .thumb-list-wrap {
      position: relative;
      margin-bottom: 0.5rem;
    }

    .thumb-list {
      display: flex;
      gap: 0.5rem;
      overflow-x: auto;
      padding-bottom: 0.5rem;
      -webkit-overflow-scrolling: touch;
      /* smooth scroll ios */
      scroll-behavior: smooth;
    }

    .thumb-list img {
      flex-shrink: 0;
      width: 90px;
      height: 60px;
      object-fit: cover;
      cursor: pointer;
      border-radius: 4px;
    }

    /* Navigation buttons */
    .thumb-nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.15);
    }

    .thumb-nav-left {
      left: -16px;
    }

    .thumb-nav-right {
      right: -16px;
    }

    @media (min-width: 768px) {
      .thumb-list {
        flex-wrap: wrap;
        overflow-x: visible;
      }

      .thumb-nav-btn {
        display: none;
      }
    }
  </style>
</head>

<body class="bg-light">
  <!-- HEADER -->
  <div id="header-placeholder"></div>

  <!-- CONTENT -->
  <div class="container mb-5">
    <div class="row g-4">
      <!-- Galeri Foto Mobil -->
      <div class="col-md-6">
        <div class="border rounded shadow-sm mb-3 overflow-hidden bg-white" style="min-height: 300px">
          <img id="main-image" src="" alt="Foto Mobil Besar" class="w-100"
            style="object-fit: cover; min-height: 300px" />
        </div>

        <div class="thumb-list-wrap">
          <button class="thumb-nav-btn thumb-nav-left" id="scroll-left" aria-label="Scroll ke kiri">
            <i class="bi bi-chevron-left"></i>
          </button>
          <div class="thumb-list"></div>
          <button class="thumb-nav-btn thumb-nav-right" id="scroll-right" aria-label="Scroll ke kanan">
            <i class="bi bi-chevron-right"></i>
          </button>
        </div>
      </div>

      <!-- Detail Info Mobil -->
      <div class="col-md-6">
        <div class="card shadow-sm p-4 h-100">
          <h2 class="card-title mb-2" id="mobil-nama">Loading...</h2>
          <h4 class="text-primary fw-bold mb-3" id="mobil-harga"></h4>
          <div class="row gy-2">
            <div class="col-6 col-md-6">
              <div class="p-2 bg-light rounded border mb-2">
                <span class="fw-bold">Tahun: </span><span id="mobil-tahun"></span>
              </div>
              <div class="p-2 bg-light rounded border mb-2">
                <span class="fw-bold">Kilometer: </span><span id="mobil-km"></span>
              </div>
            </div>
            <div class="col-6 col-md-6">
              <div class="p-2 bg-light rounded border mb-2">
                <span class="fw-bold">Bahan Bakar: </span><span id="mobil-bbm"></span>
              </div>
              <div class="p-2 bg-light rounded border mb-2">
                <span class="fw-bold">Transmisi: </span><span id="mobil-transmisi"></span>
              </div>
            </div>
          </div>

          <div class="card border-0 shadow-sm mb-4" style="background: #f6f8fa">
            <div class="card-body">
              <h5 class="card-title mb-3">
                <i class="bi bi-info-circle-fill text-primary"></i> Deskripsi
                Mobil
              </h5>
              <div class="mb-3 ms-3" id="mobil-deskripsi"></div>
              <div class="mb-1">
                <strong>Kondisi:</strong> <span id="kondisi-kondisi"></span>
              </div>
              <div class="mb-1">
                <strong>Interior:</strong> <span id="kondisi-interior"></span>
              </div>
              <div class="mb-1">
                <strong>Eksterior:</strong>
                <span id="kondisi-eksterior"></span>
              </div>
              <div class="mb-1">
                <strong>Kelengkapan:</strong>
                <span id="kondisi-kelengkapan"></span>
              </div>
              <div class="mb-1">
                <strong>Drive On:</strong> <span id="kondisi-driveon"></span>
              </div>
              <div class="mb-1">
                <strong>Tambahan:</strong> <span id="kondisi-tambahan"></span>
              </div>
              <div class="mb-1">
                <strong>Warna:</strong> <span id="mobil-warna"></span>
              </div>
            </div>
          </div>

          <div class="d-flex gap-2">
            <a href="#" id="btn-hubungi" target="_blank" rel="noopener noreferrer"
              class="btn btn-primary flex-fill">Hubungi</a>
            <a href="index.html" class="btn btn-outline-secondary flex-fill">Kembali</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Popup Gambar -->
  <div class="modal fade" id="imgModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-transparent border-0 shadow-none">
        <img id="modal-img" src="" alt="Foto Mobil Besar" class="img-fluid rounded"
          style="max-height:75vh;display:block;margin:auto;">
      </div>
    </div>
  </div>


  <!-- FOOTER -->
  <div id="footer-placeholder"></div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Fetch header
      fetch("header.html")
        .then((res) => res.text())
        .then((data) =>
          (document.getElementById("header-placeholder").innerHTML = data)
        );

      // Fetch footer + notif WA
      fetch("footer.html")
        .then(res => res.text())
        .then(data => {
          document.getElementById("footer-placeholder").innerHTML = data;
          const notif = document.getElementById('whatsapp-notif');
          if (notif) {
            setTimeout(() => {
              notif.style.display = 'block';
              notif.style.animation = 'slideIn 0.4s ease-out';
            }, 2000);
            notif.addEventListener('click', () => {
              window.open('https://wa.me/6281288011459', '_blank');
              notif.style.display = 'none';
            });
            setTimeout(() => {
              notif.style.display = 'none';
            }, 10000);
          }
        });

      // DETAIL MOBIL LOGIC START HERE
      const params = new URLSearchParams(window.location.search);
      const id = parseInt(params.get("id"));
      if (!id) {
        alert("ID mobil tidak ditemukan di URL");
        return;
      }

      fetch("data.json")
        .then((res) => res.json())
        .then((data) => {
          const mobil = data.find((m) => m.id === id);
          if (!mobil) {
            alert("Mobil dengan ID tersebut tidak ditemukan");
            return;
          }
          // Isi info detail ke DOM
          document.getElementById("mobil-nama").textContent = mobil.nama;
          document.getElementById("mobil-harga").textContent = `Rp ${mobil.harga.toLocaleString("id-ID")}`;
          document.getElementById("mobil-tahun").textContent = mobil.tahun;
          document.getElementById("mobil-km").textContent = mobil.kilometer;
          document.getElementById("mobil-bbm").textContent = mobil.bahan_bakar;
          document.getElementById("mobil-transmisi").textContent = mobil.transmisi;
          document.getElementById("kondisi-kondisi").textContent = mobil.kondisi || "-";
          document.getElementById("kondisi-interior").textContent = mobil.interior || "-";
          document.getElementById("kondisi-eksterior").textContent = mobil.eksterior || "-";
          document.getElementById("kondisi-kelengkapan").textContent = mobil.stnk_bpkb || "-";
          document.getElementById("kondisi-driveon").textContent = mobil.drive_on || "-";
          document.getElementById("kondisi-tambahan").textContent = mobil.tambahan || "-";
          document.getElementById("mobil-warna").textContent = mobil.warna || "-";
          
          // Set main image
          document.getElementById("main-image").src = mobil.gambar[0];
          document.getElementById("main-image").onclick = function () {
            const modalImg = document.getElementById("modal-img");
            modalImg.src = this.src;
            // Bootstrap 5 modal show
            const bsModal = new bootstrap.Modal(document.getElementById('imgModal'));
            bsModal.show();
          };

          // Build thumbnails
          const thumbList = document.querySelector(".thumb-list");
          thumbList.innerHTML = "";
          mobil.gambar.forEach((src, idx) => {
            const thumb = document.createElement("img");
            thumb.src = src;
            thumb.classList.add("img-thumbnail");
            thumb.style.width = "90px";
            thumb.style.height = "60px";
            thumb.style.objectFit = "cover";
            thumb.alt = `Thumbnail ${idx + 1}`;
            if (idx === 0) thumb.classList.add("active");
            thumb.onclick = () => {
              document.getElementById("main-image").src = src;
              document.querySelectorAll(".thumb-list img").forEach(img => img.classList.remove("active"));
              thumb.classList.add("active");
            };
            thumbList.appendChild(thumb);
          });

          // Setup tombol WhatsApp
          const whatsappNumber = "6281288011459";
          const message = encodeURIComponent(`Halo, saya tertarik dengan mobil ${mobil.nama}. Apakah masih tersedia?`);
          const btnHubungi = document.getElementById("btn-hubungi");
          if (mobil.status === "Terjual") {
            btnHubungi.classList.remove("btn-primary");
            btnHubungi.classList.add("btn-secondary");
            btnHubungi.textContent = "Terjual";
            btnHubungi.removeAttribute("href");
            btnHubungi.setAttribute("disabled", true);
          } else {
            btnHubungi.href = `https://wa.me/${whatsappNumber}?text=${message}`;
            btnHubungi.removeAttribute("disabled");
            btnHubungi.classList.remove("btn-secondary");
            btnHubungi.classList.add("btn-primary");
            btnHubungi.textContent = "Hubungi";
          }
        })
        .catch(() => alert("Gagal mengambil data mobil."));

      // Thumbnail navigation (geser kiri-kanan)
      const btnLeft = document.getElementById("scroll-left");
      const btnRight = document.getElementById("scroll-right");
      if (btnLeft) btnLeft.onclick = () => {
        document.querySelector(".thumb-list").scrollBy({ left: -100, behavior: "smooth" });
      }
      if (btnRight) btnRight.onclick = () => {
        document.querySelector(".thumb-list").scrollBy({ left: 100, behavior: "smooth" });
      }
    });

  </script>

  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>


