<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BINTANG MOTOR SUBANG (RIZKI) - Detail Mobil</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="style.css" />
  <style>
    .thumb-list img.active {
      border: 2px solid #0d6efd;
    }
  </style>
</head>
<body class="bg-light">
  <!-- HEADER -->
 <div id="header-placeholder"></div>

  <!-- CONTENT -->
  <div class="container mb-5">
    <div class="row g-4">
      <!-- Galeri Foto Mobil -->
      <div class="col-md-6">
        <div class="border rounded shadow-sm mb-3 overflow-hidden bg-white" style="min-height:300px;">
          <img id="main-image" src="" alt="Foto Mobil Besar" class="w-100" style="object-fit:cover;min-height:300px;" />
        </div>
        <div class="d-flex gap-2 thumb-list"></div>
      </div>

      <!-- Detail Info Mobil -->
      <div class="col-md-6">
        <div class="card shadow-sm p-4 h-100">
          <h2 class="card-title mb-2" id="mobil-nama">Loading...</h2>
          <h4 class="text-primary fw-bold mb-3" id="mobil-harga"></h4>
          <div class="row mb-3 gy-2">
            <div class="col-6">
              <div class="p-2 bg-light rounded border mb-2">
                <span class="fw-bold">Tahun: </span><span id="mobil-tahun"></span>
              </div>
              <div class="p-2 bg-light rounded border">
                <span class="fw-bold">Kilometer: </span><span id="mobil-km"></span>
              </div>
            </div>
            <div class="col-6">
              <div class="p-2 bg-light rounded border mb-2">
                <span class="fw-bold">Bahan Bakar: </span><span id="mobil-bbm"></span>
              </div>
              <div class="p-2 bg-light rounded border">
                <span class="fw-bold">Transmisi: </span><span id="mobil-transmisi"></span>
              </div>
            </div>
          </div>

          <div class="card border-0 shadow-sm mb-4" style="background: #f6f8fa;">
            <div class="card-body">
              <h5 class="card-title mb-3"><i class="bi bi-info-circle-fill text-primary"></i> Deskripsi Mobil</h5>
              <div class="mb-3 ms-3" id="mobil-deskripsi"></div>
              <div class="mb-1"><strong>Kondisi:</strong> <span id="kondisi-kondisi"></span></div>
              <div class="mb-1"><strong>Interior:</strong> <span id="kondisi-interior"></span></div>
              <div class="mb-1"><strong>Eksterior:</strong> <span id="kondisi-eksterior"></span></div>
              <div class="mb-1"><strong>Kelengkapan:</strong> <span id="kondisi-kelengkapan"></span></div>
            </div>
            <div class="small" id="mobil-catatan"></div>
          </div>

          <div class="d-flex gap-2">
            <a href="#" id="btn-hubungi" target="_blank" rel="noopener noreferrer" class="btn btn-primary flex-fill">Hubungi</a>
            <a href="javascript:history.back()" class="btn btn-outline-secondary flex-fill">Kembali</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <div id="footer-placeholder"></div>

  <script>
     fetch("header.html")
                .then((res) => res.text())
                .then(
                    (data) =>
                        (document.getElementById("header-placeholder").innerHTML = data)
                );

            fetch("footer.html")
                .then((res) => res.text())
                .then(
                    (data) =>
                        (document.getElementById("footer-placeholder").innerHTML = data)
                );

    // Fungsi ganti gambar utama berdasarkan thumbnail klik
    function changeImage(el) {
      document.getElementById('main-image').src = el.src;
      document.querySelectorAll('.thumb-list img').forEach(img => img.classList.remove('active'));
      el.classList.add('active');
    }

    document.addEventListener("DOMContentLoaded", () => {
      const params = new URLSearchParams(window.location.search);
      const id = parseInt(params.get('id'));
      if (!id) {
        alert("ID mobil tidak ditemukan di URL");
        return;
      }

      fetch("data.json")
        .then(res => res.json())
        .then(data => {
          const mobil = data.find(m => m.id === id);
          if (!mobil) {
            alert("Mobil dengan ID tersebut tidak ditemukan");
            return;
          }

          // Isi detail data
          document.getElementById('mobil-nama').textContent = mobil.nama;
          document.getElementById('mobil-harga').textContent = `Rp ${mobil.harga.toLocaleString('id-ID')}`;
          document.getElementById('mobil-tahun').textContent = mobil.tahun;
          document.getElementById('mobil-km').textContent = mobil.kilometer;
          document.getElementById('mobil-bbm').textContent = mobil.bahan_bakar;
          document.getElementById('mobil-transmisi').textContent = mobil.transmisi;
          document.getElementById('mobil-deskripsi').textContent = mobil.deskripsi;
          document.getElementById('kondisi-kondisi').textContent = mobil.kondisi.kondisi;
          document.getElementById('kondisi-interior').textContent = mobil.kondisi.interior;
          document.getElementById('kondisi-eksterior').textContent = mobil.kondisi.eksterior;
          document.getElementById('kondisi-kelengkapan').textContent = mobil.kondisi.kelengkapan;
          document.getElementById('mobil-catatan').textContent = `${mobil.nama} cocok untuk keluarga dan harian, siap pakai tanpa biaya tambahan.`;

          // Set gambar utama jadi gambar pertama
          document.getElementById('main-image').src = mobil.gambar[0];

          // Buat galeri thumbnail
          const thumbList = document.querySelector('.thumb-list');
          thumbList.innerHTML = '';
          mobil.gambar.forEach((imgSrc, idx) => {
            const thumb = document.createElement('img');
            thumb.src = imgSrc;
            thumb.classList.add('img-thumbnail');
            thumb.style.width = '90px';
            thumb.style.height = '60px';
            thumb.style.objectFit = 'cover';
            thumb.alt = `Thumbnail ${idx + 1}`;
            if (idx === 0) thumb.classList.add('active');
            thumb.onclick = () => changeImage(thumb);
            thumbList.appendChild(thumb);
          });

          // Setup tombol Hubungi WhatsApp
          const whatsappNumber = "6281288011459"; // ganti nomor sesuai kebutuhan
          const message = encodeURIComponent(`Halo, saya tertarik dengan mobil ${mobil.nama}. Apakah masih tersedia?`);
          const btnHubungi = document.getElementById('btn-hubungi');
          
          if(mobil.status === "Terjual"){
            btnHubungi.classList.remove("btn-primary");
            btnHubungi.classList.add("btn-secondary");
            btnHubungi.textContent = "Terjual";
            btnHubungi.removeAttribute("href");
            btnHubungi.setAttribute("disabled", true);
          } else {
            btnHubungi.href = `https://wa.me/${whatsappNumber}?text=${message}`;
            btnHubungi.removeAttribute("disabled");
            btnHubungi.classList.remove("btn-secondary");
            btnHubungi.classList.add("btn-primary");
            btnHubungi.textContent = "Hubungi";
          }
        })
        .catch(() => alert("Gagal mengambil data mobil."));
    });
  </script>
<script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
